@using BusinessLayer.Helpers;

<div class="container-fluid page-invest" ng-controller="opportunitiesController" ng-init="loadToInvest()">

    <section class="section section-title">
        <div class="row mb-0">

            <div class="col-xs-10 col-sm-8">
                <h6>@Resource.Views.Project.Invest.title {{project.name}}</h6>
                <h2>@Resource.Views.Project.Invest.subTitle</h2>
            </div>
            <div class="col-xs-2 col-sm-4">
                <div class="pull-right">
                    <a ng-click="viewProject(project.id)"><i class="fa fa-arrow-circle-left"></i>&nbsp;<span class="hidden-xs">@Resource.Views.Project.Invest.lnkBack</span></a>
                </div>
            </div>

        </div>
    </section>

    <div class="col-md-12">
        @Html.Partial("_AlertDanger")

        <div id="tradingOperation" ng-class="{'d-block':(loadPage && !showActiveAccount && !showAuthenticationMethod)}">

            <div class="row">

                <div class="col-md-6 nopadding-right-md">
                    <div class="summary">

                        <div class="row">
                            <div class="col-md-12">
                                <div class="text-center text-uppercase title">
                                    <h5>@Resource.Views.Project.Invest.titInvestDetail</h5>
                                </div>
                                <div class="separador-20"></div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">

                                <div class="flip-container">
                                    <div class="row">
                                        <div class="col-md-6 pr-0 flipperBlock borderRightSeparator">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <p class="title text-uppercase">@Resource.Views.Project.Invest.lblCapitalToInvest</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-offset-2 col-md-8">
                                                    <input type="text" id="amount" name="amount" pattern="\d*" class="form-control text-center value"
                                                           value="{{formInvest.amount | number : 0}}" readonly="readonly">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 nopadding-left-md flipperBlock">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <p class="title text-uppercase">@Resource.Views.Project.Invest.lblNoFractions</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <span id="acciones" class="value">{{formInvest.amount | number}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="separador-30"></div>

                        <div class="row">
                            <div class="col-md-12">

                                <div class="flip-container vertical">
                                    <div class="row">
                                        <div class="col-md-6 nopadding-right-md flipperBlock plusSignRightSeparator">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <p class="title text-uppercase">@Resource.Views.Project.Invest.lblEstimatedProfit</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <span class="value">{{project.profitability}}<span class="">%</span></span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6 nopadding-left-md flipperBlock">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <p class="title text-uppercase">@Resource.Views.Project.Invest.lblTerm</p>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <span class="value">
                                                        {{project.timeLimit}}<span class=""> @Resource.Views.Project.Invest.lblMonth{{(project.timeLimit==1)?'':'@Resource.Views.Project.Invest.lblMonth_S'}}</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>

                    </div>
                </div>

                <div class="col-md-6 nopadding-left-md">
                    <div class="payment">

                        <div class="row">
                            <div class="col-md-12">
                                <div class="text-center text-uppercase title">
                                    <h5>@Resource.Views.Project.Invest.lblResumeCapital</h5>
                                </div>
                                <div class="separador-16"></div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <div class="form-check mb-2">
                                    <p>@Resource.Views.Project.Invest.lblCurrentCapital: $ {{dataHeader.balanceamount | number : 0}}</p>
                                    <p ng-show="dataHeader.balanceamount > 0">@Resource.Views.Project.Invest.lblAfterInvest: <strong>$ {{(dataHeader.balanceamount + formInvest.amount) | number : 0}}</strong></p>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12">
                                <hr>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" ng-model="formInvest.agree" id="defaultCheckbox1"
                                           ng-disabled="formInvest.amount==0">
                                    <label class="form-check-label" for="defaultCheckbox1">
                                        @Html.Raw(String.Format(Resource.Views.Project.Invest.chkAgree, CommonHelper.getStoragePath() + "invesafedocs/" + Common.meta_lang + "_Invesafe_TerminosyCondiciones.pdf"))
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-12 text-center">
                                <div class="separador-16"></div>
                                <span class="hidden-xl-down amountFail">@Resource.Messages.Warning.amountFail</span>
                                <span class="hidden-xl-down aceptAgree">@Resource.Messages.Warning.aceptAgree</span>
                                <button type="button" class="btn btn-warning" data-locale="es"
                                        ng-click="confirmInvest()" ng-disabled="formInvest.amount==0">
                                    @Resource.Views.Project.Invest.btnConfirm
                                </button>
                                <div class="separador-20"></div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="modal fade" id="modalCode" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
         aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title w-100 font-weight-bold">@Resource.Views.Project.Invest.titConfirmInvest</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-12">
                            <p>@Html.Raw(Resource.Views.Project.Invest.txtConfirmInvest)</p>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <div class="md-form">
                                <ng-digit-code name="txtDigit1_group" ng-model="formCode.code"></ng-digit-code>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer d-flex justify-content-center">
                    <span class="hidden-xl-down codeFail">@Resource.Messages.Info.codeFail</span>
                    <button type="button" class="btn btn-primary" ng-click="continueInvest()" ng-disabled="formCode.code==''">@Resource.Views.Project.Invest.btnNext</button>
                </div>
            </div>
        </div>
    </div>
</div>